<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
                      "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd"
[ 
	<!ENTITY % wdb.entities SYSTEM "../docbook/wdb_entities.ent">
	%wdb.entities;
]
>

<refentry id='pointLoad1'>
	
	<refmeta>
		<refentrytitle>pointLoad</refentrytitle>
		<manvolnum>1</manvolnum>
	</refmeta>
	
	<refnamediv>
		<refname>pointLoad</refname>
                <refpurpose>Extracts point data from FELT | GRIB1 | GRIB2 | NETCDF gridded files to be loaded into the WDB database.
                            Template file is used to describe latitude/longitude pairs for points of interest.
                            Point loader is a part of the WDB system and works together with wdb-fastload (see https://github.com/wdb/wdb-contrib).
                </refpurpose>
	</refnamediv>
	
	<refsynopsisdiv>
		<cmdsynopsis>
			<command>pointLoad</command>
			<arg choice='opt'>OPTIONS</arg>
		</cmdsynopsis>
	</refsynopsisdiv>
	
	<refsect1>
		<title>Description</title>
		
                <para>
                      pointLoad extracts point data from FELT | GRIB1 | GRIB2 | NETCDF gridded files to be loaded into the wdb database.
                      The extracted data (lines to be fed into wdb) is sent either to standard output or to designated file.
                      For actual loading into wdb database one must use wdb-fastload utility (see https://github.com/wdb/wdb-contrib).
                      The data lines must be in the format recognized by wdb-fastload.
                </para>
		
		<para>
                      The pointLoad is using libfimex and template interpolation to extract point data from gridded files.
                      The template file (given in NetCDF format) describes latitude/longitude pairs for points of interest.
                      For more info on fimex and template interpolation consult https://wiki.met.no/fimex/start.
                </para>
		
	</refsect1>
	
	<refsect1>
		<title>Options</title>
		
		<variablelist>
			<?dbfo list-presentation="blocks"?>
			
			<varlistentry>
				<term>--help</term>
				<listitem>
					<para>Produces the help message and then exits.</para>
				</listitem>
			</varlistentry>

			<varlistentry>
				<term>--version</term>
				<listitem>
					<para>Produces version information and then exit.</para>
				</listitem>
			</varlistentry>

			<varlistentry>
				<term>--config MAIN.CONF</term>
				<listitem>
					<para>
                                              Specify main configuration file to run pointLoad.
                                              The main configuration can host all available options.
                                              (see examples: /usr/share/doc/wdb-pointLoad/etc/felt/load.conf)
                                        </para>
				</listitem>
			</varlistentry>
			
			<varlistentry>
                                <term>--logfile FILENAME.LOG</term>
                                <listitem>
                                        <para>Set output logfile. The default is to print to stdout</para>
                                </listitem>
                        </varlistentry>
                        
                        <varlistentry>
                                <term>--loglevel LEVEL</term>
                                <listitem>
                                        <para>Sets the logging level, from 1 (most) to 5 (least)</para>
                                </listitem>
                        </varlistentry>

			<varlistentry>
				<term>--name FILENAME.IN</term>
				<listitem>
					<para>Name of the file that contains gridded data.</para>
				</listitem>
			</varlistentry>

			<varlistentry>
				<term>--output FILENAME.OUT</term>
				<listitem>
					<para>Name of the file extracted points are to be written to.</para>
				</listitem>
			</varlistentry>
			
			<varlistentry>
				<term>--type TYPE</term>
				<listitem>
					<para>Type of the gridded file to be extracted - TYPE can take any of values felt | grib1 | grib2 | netcdf.</para>
				</listitem>
			</varlistentry>

			<varlistentry>
				<term>-d DBNAME</term>
				<term>--database=DBNAME</term>
				<listitem>
					<para>Specify the database name to connect to (e.g., wdb).</para>
				</listitem>
			</varlistentry>
			
			<varlistentry>
				<term>-h DBHOST</term>
				<term>--host=DBHOST</term>
				<listitem>
					<para>Specify the database host to connect to (e.g., somehost.met.no).</para>
				</listitem>
			</varlistentry>
			
			<varlistentry>
				<term>-u DBUSER</term>
				<term>--user=DBUSER</term>
				<listitem>
					<para>Specify the WDB user to connect as (e.g., wdb).</para>
				</listitem>
			</varlistentry>
			
			<varlistentry>
				<term>-p DBPORT</term>
				<term>--port=DBPORT</term>
				<listitem>
					<para>Specify the database port to connect to (e.g., 5432).</para>
				</listitem>
			</varlistentry>

			<varlistentry>
				<term>--validtime.config VALIDTIME.CONF</term>
				<listitem>
					<para>
                                              Specify path to validtime configuration file for [FELT | GRIB1 | GRIB2].
                                              For further information look documentation for:
                                              wdb-feltLoad (see: https://github.com/wdb/wdb-feltload) or wdb-gribLoad (see https://github.com/wdb/wdb-gribload).
                                              In addtion, some examples can be found inside the wdb-pointLoad package: /usr/share/doc/wdb-pointLoad/etc/felt/validtime.cfg.
                                        </para>
				</listitem>
			</varlistentry>

			<varlistentry>
				<term>--dataprovider.config DATAPROVIDER.CONF</term>
				<listitem>
					<para>
                                              Specify path to dataprovider configuration file for [FELT | GRIB1 | GRIB2].
                                              For further information look documentation for:
                                              wdb-feltLoad (see: https://github.com/wdb/wdb-feltload) or wdb-gribLoad (see https://github.com/wdb/wdb-gribload).
                                              In addtion, some examples can be found inside the wdb-pointLoad package: /usr/share/doc/wdb-pointLoad/etc/felt/dataprovider.cfg.
                                        </para>
				</listitem>
			</varlistentry>

			<varlistentry>
				<term>--valueparameter.config VALUEPARAMETER.CONF</term>
				<listitem>
					<para>
                                              Specify path to valueparameter configuration file for [FELT | GRIB1 | NETCDF].
                                              For further information look documentation for:
                                              wdb-feltLoad (see: https://github.com/wdb/wdb-feltload) or wdb-gribLoad (see https://github.com/wdb/wdb-gribload).
                                              In addtion, some examples can be found inside the wdb-pointLoad package: /usr/share/doc/wdb-pointLoad/etc/felt/valueparameter.cfg.
                                        </para>
				</listitem>
			</varlistentry>

			<varlistentry>
				<term>--levelparameter.config LEVELPARAMETER.CONF</term>
				<listitem>
					<para>
                                              Specify path to levelparameter configuration file for [FELT | GRIB1 | NETCDF].
                                              For further information look documentation for:
                                              wdb-feltLoad (see: https://github.com/wdb/wdb-feltload) or wdb-gribLoad (see https://github.com/wdb/wdb-gribload).
                                              In addtion, some examples can be found inside the wdb-pointLoad package: /usr/share/doc/wdb-pointLoad/etc/felt/levelparameter.cfg.
                                        </para>
				</listitem>
			</varlistentry>

			<varlistentry>
				<term>--leveladditions.config LEVELADDITIONS.CONF</term>
				<listitem>
					<para>
                                              Specify path to leveladditions configuration file for [FELT | GRIB1 | NETCDF].
                                              For further information look documentation for:
                                              wdb-feltLoad (see: https://github.com/wdb/wdb-feltload) or wdb-gribLoad (see https://github.com/wdb/wdb-gribload).
                                              In addtion, some examples can be found inside the wdb-pointLoad package: /usr/share/doc/wdb-pointLoad/etc/felt/leveladdtions.cfg.
                                        </para>
				</listitem>
			</varlistentry>

			<varlistentry>
				<term>--valueparameter2.config VALUEPARAMETER2.CONF</term>
				<listitem>
					<para>
                                              Specify path to valueparameter2 configuration file for [GRIB2].
                                              For further information look documentation for: wdb-gribLoad (see https://github.com/wdb/wdb-gribload).
                                              In addtion, some examples can be found inside the wdb-pointLoad package: /usr/share/doc/wdb-pointLoad/etc/grib2/valueparameter2.cfg.
                                        </para>
				</listitem>
			</varlistentry>

			<varlistentry>
				<term>--levelparameter2.config LEVELPARAMETER2.CONF</term>
				<listitem>
					<para>
                                              Specify path to levelparameter2 configuration file for [GRIB2].
                                              For further information look documentation for: wdb-gribLoad (see https://github.com/wdb/wdb-gribload).
                                              In addtion, some examples can be found inside the wdb-pointLoad package: /usr/share/doc/wdb-pointLoad/etc/grib2/levelparameter2.cfg.
                                        </para>
				</listitem>
			</varlistentry>

			<varlistentry>
				<term>--leveladditions2.config LEVELADDITIONS2.CONF</term>
				<listitem>
					<para>
                                              Specify path to leveladditions2 configuration file for [GRIB2].
                                              For further information look documentation for: wdb-gribLoad (see https://github.com/wdb/wdb-gribload).
                                              In addtion, some examples can be found inside the wdb-pointLoad package: /usr/share/doc/wdb-pointLoad/etc/grib2/leveladdtions2.cfg.
                                        </para>
				</listitem>
			</varlistentry>

			<varlistentry>
				<term>--fimex.config FIMEXREADER.XML</term>
				<listitem>
					<para>
                                              Specify path to fimex reader configuration file.
                                              For more info on fimex and template interpolation consult https://wiki.met.no/fimex/start.
                                              In addtion, some examples can be found inside the wdb-pointLoad package: /usr/share/doc/wdb-pointLoad/etc/grib/gribreader.xml.
                                        </para>
				</listitem>
			</varlistentry>

			<varlistentry>
				<term>--fimex.interpolate.template TEMPLATE.NC</term>
				<listitem>
					<para>
                                              Specify path to file used in fimex template interpolation (describes latitude/longitude values for points of interest).
                                              For more info on fimex and template interpolation consult https://wiki.met.no/fimex/start.
                                              In addtion, some examples can be found inside the wdb-pointLoad package: /usr/share/doc/wdb-pointLoad/etc/grib/stations.nc.
                                        </para>
				</listitem>
			</varlistentry>

		</variablelist>


	</refsect1>
	
	<refsect1>
		<title>Exit Status</title>
		
		<para>pointLoad returns 0 to the shell if it finished normally and 1 if a fatal error
		      occured during loading (out of memory, files not found, database not found,
		      etc.).
                </para>

                <para>
                      IMPORTANT:
                </para>
		
	</refsect1>
	
</refentry>
